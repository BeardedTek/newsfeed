<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  Docker Optimizations
  #

NewsFeed uses optimized Docker containers for both development and production environments. This page documents the optimizations and best practices implemented in our Docker setup.

  Multi-Stage Builds
  #

Both frontend and backend services use multi-stage builds to optimize container size and security:

  Frontend Multi-Stage Build
  #

The frontend Dockerfile uses a four-stage build process:

Base Stage: Sets up the common environment
Dependencies Stage: Installs npm dependencies
Build Stage: Compiles the Next.js application
Runner Stage: Creates a minimal production image

This approach significantly reduces the final image size by excluding development dependencies and build tools."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="/docs/docs/deployment/docker-optimizations/"><meta property="og:site_name" content="NewsFeed Documentation"><meta property="og:title" content="Docker Optimizations"><meta property="og:description" content="Docker Optimizations # NewsFeed uses optimized Docker containers for both development and production environments. This page documents the optimizations and best practices implemented in our Docker setup.
Multi-Stage Builds # Both frontend and backend services use multi-stage builds to optimize container size and security:
Frontend Multi-Stage Build # The frontend Dockerfile uses a four-stage build process:
Base Stage: Sets up the common environment Dependencies Stage: Installs npm dependencies Build Stage: Compiles the Next.js application Runner Stage: Creates a minimal production image This approach significantly reduces the final image size by excluding development dependencies and build tools."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><title>Docker Optimizations | NewsFeed Documentation</title><link rel=icon href=/docs/favicon.png><link rel=manifest href=/docs/manifest.json><link rel=canonical href=/docs/docs/deployment/docker-optimizations/><link rel=stylesheet href=/docs/book.min.27c601ff251cc5c9796bb272aace960013cf351d0c28a7e1301487b32d4800ee.css><script defer src=/docs/fuse.min.js></script><script defer src=/docs/en.search.min.50f06386365de8f89d841b8d0b503999b6a546355a068584d4f6d56087201672.js></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/docs/><img src=/docs/logo.png alt=Logo class=book-icon><span>NewsFeed Documentation</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><input type=checkbox id=section-1bd881b6f3674bdbe6a5832f365e2cc1 class=toggle>
<label for=section-1bd881b6f3674bdbe6a5832f365e2cc1 class=flex><a href=/docs/docs/frontend/ class=flex-auto>Frontend Usage Guide</a></label><ul></ul></li><li><input type=checkbox id=section-e2abcc6bc653a4ad229e66aa778ea8ce class=toggle>
<label for=section-e2abcc6bc653a4ad229e66aa778ea8ce class=flex><a href=/docs/docs/admin/ class=flex-auto>Admin Dashboard Guide</a></label><ul></ul></li><li><input type=checkbox id=section-89295e3ad87cd739e9ae7938c36f5572 class=toggle>
<label for=section-89295e3ad87cd739e9ae7938c36f5572 class=flex><a href=/docs/docs/backend/ class=flex-auto>Backend API Documentation</a></label><ul></ul></li><li><input type=checkbox id=section-193dd47a9b08cf6c33639b07114fafa0 class=toggle>
<label for=section-193dd47a9b08cf6c33639b07114fafa0 class=flex><a href=/docs/docs/worker/ class=flex-auto>Worker Tasks</a></label><ul></ul></li><li><input type=checkbox id=section-ded1921c1a8aa8969511130d8fba8cc0 class=toggle>
<label for=section-ded1921c1a8aa8969511130d8fba8cc0 class=flex><a href=/docs/docs/authentication/ class=flex-auto>Authentication</a></label><ul></ul></li><li><input type=checkbox id=section-83334284bc70767f5442a76139afa498 class=toggle checked>
<label for=section-83334284bc70767f5442a76139afa498 class=flex><a href=/docs/docs/deployment/ class=flex-auto>Deployment Guides</a></label><ul><li><a href=/docs/docs/deployment/docker-optimizations/ class=active>Docker Optimizations</a></li><li><a href=/docs/docs/deployment/runtime-environment/>Frontend Environment Variables</a></li><li><a href=/docs/docs/deployment/backend-environment/>Backend Environment Variables</a></li><li><a href=/docs/docs/deployment/nginx-configuration/>Nginx Configuration</a></li><li><a href=/docs/docs/deployment/ci-cd/>Continuous Integration and Deployment</a></li><li><a href=/docs/docs/deployment/git-hooks/>Git Hooks</a></li></ul></li><li><input type=checkbox id=section-f665c998950cb6dbc3aa497165a99b48 class=toggle>
<label for=section-f665c998950cb6dbc3aa497165a99b48 class=flex><a href=/docs/docs/platforms/ class=flex-auto>Platform-Specific Guides</a></label><ul></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/docs/svg/menu.svg class=book-icon alt=Menu></label><h3>Docker Optimizations</h3><label for=toc-control><img src=/docs/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#multi-stage-builds>Multi-Stage Builds</a><ul><li><a href=#frontend-multi-stage-build>Frontend Multi-Stage Build</a></li><li><a href=#backend-multi-stage-build>Backend Multi-Stage Build</a></li></ul></li><li><a href=#security-enhancements>Security Enhancements</a><ul><li><a href=#non-root-user-execution>Non-Root User Execution</a></li><li><a href=#proper-file-permissions>Proper File Permissions</a></li></ul></li><li><a href=#health-checks>Health Checks</a><ul><li><a href=#frontend-health-check>Frontend Health Check</a></li><li><a href=#backend-health-check>Backend Health Check</a></li><li><a href=#worker-health-check>Worker Health Check</a></li></ul></li><li><a href=#performance-optimizations>Performance Optimizations</a><ul><li><a href=#minimal-base-images>Minimal Base Images</a></li><li><a href=#optimized-dependency-installation>Optimized Dependency Installation</a></li><li><a href=#selective-file-copying>Selective File Copying</a></li></ul></li><li><a href=#frontend-environment-variables>Frontend Environment Variables</a></li><li><a href=#docker-compose-integration>Docker Compose Integration</a></li><li><a href=#best-practices-summary>Best Practices Summary</a></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=docker-optimizations>Docker Optimizations
<a class=anchor href=#docker-optimizations>#</a></h1><p>NewsFeed uses optimized Docker containers for both development and production environments. This page documents the optimizations and best practices implemented in our Docker setup.</p><h2 id=multi-stage-builds>Multi-Stage Builds
<a class=anchor href=#multi-stage-builds>#</a></h2><p>Both frontend and backend services use multi-stage builds to optimize container size and security:</p><h3 id=frontend-multi-stage-build>Frontend Multi-Stage Build
<a class=anchor href=#frontend-multi-stage-build>#</a></h3><p>The frontend Dockerfile uses a four-stage build process:</p><ol><li><strong>Base Stage</strong>: Sets up the common environment</li><li><strong>Dependencies Stage</strong>: Installs npm dependencies</li><li><strong>Build Stage</strong>: Compiles the Next.js application</li><li><strong>Runner Stage</strong>: Creates a minimal production image</li></ol><p>This approach significantly reduces the final image size by excluding development dependencies and build tools.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#75715e># ---- Base Stage ----</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> node:20-alpine AS base</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>WORKDIR</span><span style=color:#e6db74> /app</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># ---- Dependencies Stage ----</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> base AS dependencies</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> package*.json ./<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> npm ci --omit<span style=color:#f92672>=</span>dev --no-audit --no-fund<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># ---- Build Stage ----</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> dependencies AS builder</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> src ./src<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># ... copy other necessary files</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> npm run build<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># ---- Production Stage ----</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> node:20-alpine AS runner</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># ... copy only the necessary files from builder</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h3 id=backend-multi-stage-build>Backend Multi-Stage Build
<a class=anchor href=#backend-multi-stage-build>#</a></h3><p>The backend Dockerfile uses a two-stage build process:</p><ol><li><strong>Builder Stage</strong>: Installs all dependencies and build tools</li><li><strong>Runtime Stage</strong>: Creates a minimal production image with only runtime dependencies</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#75715e># ---- Build Stage ----</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> python:3.11-slim AS builder</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># ... install build dependencies and Python packages</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># ---- Runtime Stage ----</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> python:3.11-slim AS runtime</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># ... copy only the necessary files from builder</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h2 id=security-enhancements>Security Enhancements
<a class=anchor href=#security-enhancements>#</a></h2><h3 id=non-root-user-execution>Non-Root User Execution
<a class=anchor href=#non-root-user-execution>#</a></h3><p>All services run as non-root users to enhance security:</p><ul><li><strong>Frontend</strong>: Runs as the <code>nextjs</code> user</li><li><strong>Backend</strong>: Runs as the <code>appuser</code> user</li></ul><p>This reduces the risk of container breakouts and follows security best practices.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#75715e># Frontend example</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> addgroup --system --gid <span style=color:#ae81ff>1001</span> nodejs <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    adduser --system --uid <span style=color:#ae81ff>1001</span> nextjs<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>USER</span><span style=color:#e6db74> nextjs</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Backend example</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> groupadd -r appuser <span style=color:#f92672>&amp;&amp;</span> useradd -r -g appuser appuser<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>USER</span><span style=color:#e6db74> appuser</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h3 id=proper-file-permissions>Proper File Permissions
<a class=anchor href=#proper-file-permissions>#</a></h3><p>All files and directories have appropriate ownership and permissions:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#75715e># Set proper ownership for files</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> --from<span style=color:#f92672>=</span>builder --chown<span style=color:#f92672>=</span>nextjs:nodejs /app/.next/standalone ./<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> chown -R nextjs:nodejs /app<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h2 id=health-checks>Health Checks
<a class=anchor href=#health-checks>#</a></h2><p>All services include health checks for improved reliability:</p><h3 id=frontend-health-check>Frontend Health Check
<a class=anchor href=#frontend-health-check>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>HEALTHCHECK --interval=30s --timeout=5s </span>--start-period<span style=color:#f92672>=</span>5s --retries<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    CMD wget --no-verbose --tries<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> --spider http://localhost:3000/api/health <span style=color:#f92672>||</span> exit <span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h3 id=backend-health-check>Backend Health Check
<a class=anchor href=#backend-health-check>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>HEALTHCHECK --interval=30s --timeout=5s </span>--start-period<span style=color:#f92672>=</span>5s --retries<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    CMD python -c <span style=color:#e6db74>&#34;import requests; requests.get(&#39;http://localhost:8001/api/health&#39;)&#34;</span> <span style=color:#f92672>||</span> exit <span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h3 id=worker-health-check>Worker Health Check
<a class=anchor href=#worker-health-check>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>HEALTHCHECK --interval=30s --timeout=10s </span>--start-period<span style=color:#f92672>=</span>10s --retries<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    CMD celery -A app.workers.tasks inspect ping <span style=color:#f92672>||</span> exit <span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h2 id=performance-optimizations>Performance Optimizations
<a class=anchor href=#performance-optimizations>#</a></h2><h3 id=minimal-base-images>Minimal Base Images
<a class=anchor href=#minimal-base-images>#</a></h3><p>All services use Alpine or slim base images to reduce size:</p><ul><li>Frontend: <code>node:20-alpine</code></li><li>Backend: <code>python:3.11-slim</code></li></ul><h3 id=optimized-dependency-installation>Optimized Dependency Installation
<a class=anchor href=#optimized-dependency-installation>#</a></h3><p>Dependencies are installed with flags to reduce size and improve performance:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#75715e># Frontend</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> npm ci --omit<span style=color:#f92672>=</span>dev --no-audit --no-fund<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Backend</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> pip install --no-cache-dir -r requirements.txt<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h3 id=selective-file-copying>Selective File Copying
<a class=anchor href=#selective-file-copying>#</a></h3><p>Only necessary files are copied to each stage to improve build caching:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#75715e># Copy only specific files instead of everything</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> src ./src<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> public ./public<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> next.config.js ./<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h2 id=frontend-environment-variables>Frontend Environment Variables
<a class=anchor href=#frontend-environment-variables>#</a></h2><p>The frontend uses a runtime environment configuration system that allows changing environment variables without rebuilding the image:</p><ol><li>A template file (<code>env-config.js</code>) is included in the image</li><li>At container startup, a script replaces placeholders with actual environment values</li><li>The application loads this file at runtime to access the environment configuration</li></ol><p>This approach provides flexibility for deploying the same image to different environments.</p><h2 id=docker-compose-integration>Docker Compose Integration
<a class=anchor href=#docker-compose-integration>#</a></h2><p>The <code>docker-compose.yml</code> file integrates all these optimizations:</p><ul><li>Specifies the correct build target for multi-stage builds</li><li>Configures health checks for all services</li><li>Sets up proper dependency chains between services</li><li>Configures logging with rotation</li></ul><h2 id=best-practices-summary>Best Practices Summary
<a class=anchor href=#best-practices-summary>#</a></h2><ul><li>Use multi-stage builds to minimize image size</li><li>Run containers as non-root users</li><li>Implement health checks for all services</li><li>Use minimal base images (Alpine/slim)</li><li>Optimize dependency installation</li><li>Copy only necessary files at each stage</li><li>Use runtime environment configuration where possible</li><li>Set proper file permissions and ownership</li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/beardedtek/newsfeed/edit/main/docs/content/docs/deployment/docker-optimizations.md target=_blank rel=noopener><img src=/docs/svg/edit.svg class=book-icon alt>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#multi-stage-builds>Multi-Stage Builds</a><ul><li><a href=#frontend-multi-stage-build>Frontend Multi-Stage Build</a></li><li><a href=#backend-multi-stage-build>Backend Multi-Stage Build</a></li></ul></li><li><a href=#security-enhancements>Security Enhancements</a><ul><li><a href=#non-root-user-execution>Non-Root User Execution</a></li><li><a href=#proper-file-permissions>Proper File Permissions</a></li></ul></li><li><a href=#health-checks>Health Checks</a><ul><li><a href=#frontend-health-check>Frontend Health Check</a></li><li><a href=#backend-health-check>Backend Health Check</a></li><li><a href=#worker-health-check>Worker Health Check</a></li></ul></li><li><a href=#performance-optimizations>Performance Optimizations</a><ul><li><a href=#minimal-base-images>Minimal Base Images</a></li><li><a href=#optimized-dependency-installation>Optimized Dependency Installation</a></li><li><a href=#selective-file-copying>Selective File Copying</a></li></ul></li><li><a href=#frontend-environment-variables>Frontend Environment Variables</a></li><li><a href=#docker-compose-integration>Docker Compose Integration</a></li><li><a href=#best-practices-summary>Best Practices Summary</a></li></ul></nav></div></aside></main></body></html>